// threads
uses <bf.mash>

func fthread(.method):
  pushc  .method
  gpm
  cthr
  var .r
  pop .r
  return .r
end

func async(.method):
  pushc  .method
  gpm
  cthr
  var .r
  peek .r
  rthr
  return .r
end

proc thr_resume(.thread):
  push .thread
  rthr
end

proc thr_suspend(.thread):
  push .thread
  sthr
end

proc thr_terminate(.thread):
  push .thread
  tthr
end
